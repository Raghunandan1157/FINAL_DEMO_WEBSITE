<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>NavaChetana â€” Branch Viewer (profile_demo)</title>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    * { box-sizing: border-box; }
    html, body { width:100%; max-width:100%; overflow-x:hidden; }
    .glance-page{
      --ink:#1f2937; --muted:#6b7280; --border:#e5e7eb;
      background:#ffffff; color:var(--ink);
      font-family:"Inter",system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
      padding-bottom:32px;
    }
    .logo-img{ width:40px;height:40px;border-radius:6px;object-fit:cover; }
    #page{
      display:flex;
      flex-direction:column;
      gap:1.25rem;
      max-width:1100px;
      margin:0 auto;
      padding:clamp(1rem,2vw,2rem) 1rem;
    }
    .page-title{ text-align:center; font-size:1.35rem; font-weight:700; margin:0 0 1rem; }

    .kpi-grid{ display:grid; grid-template-columns:repeat(3,1fr); gap:0.75rem; }
    .kpi-card{ background:#ffffff; border:1px solid var(--border); border-radius:12px; padding:1rem; text-align:center; box-shadow:0 12px 24px rgba(31,41,55,.04); }
    .kpi-label{ font-weight:600; color:var(--muted); font-size:.85rem; }
    .kpi-value{ margin-top:.3rem; font-size:1.15rem; font-weight:700; }
    .span-all{ grid-column:1 / -1; }

    .card{ background:#ffffff; border:1px solid var(--border); border-radius:12px; padding:1.0rem; box-shadow:0 12px 24px rgba(31,41,55,.04); }

    .table-header{ display:flex; justify-content:space-between; align-items:center; padding:0.75rem 0; gap:.5rem; }
    .table-title{ font-size:1rem; font-weight:700; margin:0; }
    .table-scroller{ overflow:auto; }
    .table-grid{ width:100%; border-collapse:collapse; font-size:13px; table-layout:fixed; }
    .table-grid th, .table-grid td{ border:1px solid var(--border); padding:.5rem .6rem; text-align:left; vertical-align:top; white-space:nowrap; text-overflow:ellipsis; overflow:hidden; }
    .table-head{ background:#f9fafb; }

    .controls { display:flex; gap:0.75rem; align-items:flex-end; flex-wrap:wrap; margin-bottom:0.75rem; }
    select, input { padding:.45rem .6rem; border:1px solid var(--border); border-radius:8px; background:#fff; }
    .control-pair{display:flex;flex-direction:column;gap:0.2rem;min-width:150px;}
    .control-pair label{font-size:0.75rem;color:var(--muted);font-weight:600;text-transform:uppercase;letter-spacing:.04em;}
    .controls select{min-width:150px;}

    .leaders-grid th,.leaders-grid td{white-space:nowrap;}
    .leaders-grid tbody tr:nth-child(odd){background:#f9fafb;}
    .highlight-cell{background:#fef3c7;font-weight:700;}
    .table-grid tbody tr.my-row{background:#fef9c3;font-weight:600;}

    /* Source pill */
    .source-pill{
      font-size:0.72rem;
      padding:0.2rem 0.6rem;
      border-radius:999px;
      border:1px solid var(--border);
      color:var(--muted);
      background:#f9fafb;
      white-space:nowrap;
    }

    /* Branch context */
    .table-badge{
      display:inline-flex;
      align-items:center;
      border-radius:999px;
      background:#eff6ff;
      color:#1d4ed8;
      padding:0.15rem 0.6rem;
      font-size:0.75rem;
      font-weight:500;
    }

    /* Detail card */
    .detail-grid{
      display:grid;
      grid-template-columns:repeat(2,minmax(0,1fr));
      gap:.6rem .75rem;
      font-size:0.8rem;
    }
    .detail-label{
      font-size:0.72rem;
      color:var(--muted);
      text-transform:uppercase;
      letter-spacing:.04em;
      margin-bottom:0.15rem;
    }
    .detail-value{
      font-weight:600;
      font-size:0.85rem;
    }

    /* Fullscreen */
    .table-box{ margin-top:1rem; }
    .table-box:fullscreen { border-radius:0; width:100vw; height:100vh; }
    .table-box:fullscreen .table-scroller{ max-height: calc(100vh - 140px); }
    .table-box:fullscreen .table-header{ padding:1rem 1.25rem; }

    @media (max-width: 1024px){
      #page{ max-width:100%; padding-inline:0.75rem; }
      .kpi-grid{ grid-template-columns:repeat(auto-fit,minmax(180px,1fr)); }
    }
    @media (max-width: 640px){
      #page{padding-inline:0.5rem;}
      .table-grid th,.table-grid td{font-size:0.75rem; padding:0.35rem;}
      .controls{flex-direction:column;align-items:stretch;}
      .detail-grid{grid-template-columns:1fr;}
    }
  </style>
</head>
<body class="glance-page">
  <header style="display:flex;align-items:center;gap:.75rem;padding:1rem 1.25rem;border-bottom:1px solid #e5e7eb;">
    <img src="Official Logo.jpg" alt="Logo" class="logo-img" />
    <div>
      <div style="font-weight:700;font-size:1.05rem">NavaChetana Livelihoods</div>
      <div style="font-size:.8rem;color:var(--muted)">Branch Explorer â€” profile_demo</div>
    </div>
    <div style="margin-left:auto;display:flex;gap:.5rem;align-items:center;">
      <span class="source-pill" id="source-pill">Source: Supabase â€¢ database (UI demo)</span>
      <button id="btn-refresh" class="px-3 py-1 rounded bg-sky-600 text-white text-sm">Refresh</button>
      <button id="btn-download" class="px-3 py-1 rounded bg-indigo-600 text-white text-sm">Download CSV</button>
    </div>
  </header>

  <div id="page">
    <h1 class="page-title">Current Outreach â€” Branch Detail</h1>

    <main id="content">
      <!-- Branch context chips (static demo) -->
      <div id="branchContext" class="mb-4 flex flex-wrap gap-2 text-sm text-[var(--muted)]">
        <span class="table-badge">Branch: Demo Branch</span>
        <span class="table-badge">Code: 0000</span>
        <span class="table-badge">Email: demo@example.com</span>
      </div>

      <!-- Filters (pure UI) -->
      <div class="controls">
        <div class="control-pair">
          <label for="branchSelect">Branch</label>
          <select id="branchSelect">
            <option value="">â€” All branches â€”</option>
            <option>Demo Branch A</option>
            <option>Demo Branch B</option>
          </select>
        </div>
        <div class="control-pair">
          <label for="yearSelect">Year</label>
          <select id="yearSelect">
            <option value="">All</option>
            <option>2024</option>
            <option>2025</option>
          </select>
        </div>
        <div class="control-pair">
          <label for="monthSelect">Month</label>
          <select id="monthSelect">
            <option value="">All</option>
            <option>September</option>
            <option>October</option>
          </select>
        </div>
        <div style="margin-left:auto" class="text-sm text-[var(--muted)]" id="status">UI demo â€” no live data</div>
      </div>

      <!-- KPI GRID (static placeholders) -->
      <section class="kpi-grid" aria-live="polite">
        <div class="kpi-card">
          <div class="kpi-label">ACTIVE ACCOUNTS</div>
          <div id="k_active" class="kpi-value">1,234</div>
        </div>
        <div class="kpi-card">
          <div class="kpi-label">TOTAL PORTFOLIO</div>
          <div id="k_total" class="kpi-value">â‚¹ 1,23,45,678</div>
        </div>
        <div class="kpi-card">
          <div class="kpi-label">REGULAR PORTFOLIO</div>
          <div id="k_regular" class="kpi-value">â‚¹ 98,76,543</div>
        </div>

        <div class="kpi-card">
          <div class="kpi-label">1+ PAR</div>
          <div id="k_par" class="kpi-value">â‚¹ 4,56,789</div>
        </div>
        <div class="kpi-card">
          <div class="kpi-label">NPA</div>
          <div id="k_npa" class="kpi-value">â‚¹ 2,34,567</div>
        </div>
        <div class="kpi-card">
          <div class="kpi-label">MAN POWER (Count of Sl.no)</div>
          <div id="k_manpower" class="kpi-value">24</div>
        </div>

        <div class="kpi-card span-all">
          <div class="kpi-label">AUDIT RATING</div>
          <div id="k_audit" class="kpi-value">84%</div>
        </div>
      </section>

      <!-- Detail snapshot + Audit rating table -->
      <section class="grid gap-4 md:grid-cols-2">
        <!-- Detail snapshot card -->
        <article class="card">
          <div class="table-header">
            <h2 class="table-title" id="detailMetricLabel">Disbursement Accounts</h2>
            <select id="metricSelect" class="text-sm min-w-[160px]">
              <option>Disbursement Accounts</option>
              <option>Disbursement Amount</option>
              <option>Regular Portfolio Amount</option>
              <option>1+ PAR Amount</option>
            </select>
          </div>
          <div id="detailGrid" class="detail-grid">
            <div>
              <div class="detail-label">Sl. No.</div>
              <div class="detail-value">384</div>
            </div>
            <div>
              <div class="detail-label">Year</div>
              <div class="detail-value">2025</div>
            </div>
            <div>
              <div class="detail-label">Month</div>
              <div class="detail-value">October</div>
            </div>
            <div>
              <div class="detail-label">Name</div>
              <div class="detail-value">Demo Employee</div>
            </div>
            <div>
              <div class="detail-label">Employee ID</div>
              <div class="detail-value">NL10000</div>
            </div>
            <div>
              <div class="detail-label">Designation</div>
              <div class="detail-value">FO</div>
            </div>
            <div>
              <div class="detail-label">Level</div>
              <div class="detail-value">L1</div>
            </div>
            <div>
              <div class="detail-label">State</div>
              <div class="detail-value">KARNATAKA</div>
            </div>
            <div>
              <div class="detail-label">Branch Code</div>
              <div class="detail-value">5802</div>
            </div>
            <div>
              <div class="detail-label">Branch Name</div>
              <div class="detail-value">GADAG</div>
            </div>
            <div>
              <div class="detail-label">District</div>
              <div class="detail-value">GADAG</div>
            </div>
            <div>
              <div class="detail-label">Region</div>
              <div class="detail-value">DHARWAD</div>
            </div>
            <div>
              <div class="detail-label">Disbursement Accounts</div>
              <div class="detail-value">383</div>
            </div>
            <div>
              <div class="detail-label">Disbursement Amount</div>
              <div class="detail-value">â‚¹ 15,201</div>
            </div>
            <div>
              <div class="detail-label">Active Accounts</div>
              <div class="detail-value">418</div>
            </div>
            <div>
              <div class="detail-label">Total Portfolio Amount</div>
              <div class="detail-value">â‚¹ 1,12,78,455</div>
            </div>
            <div>
              <div class="detail-label">Regular Portfolio Accounts</div>
              <div class="detail-value">226</div>
            </div>
            <div>
              <div class="detail-label">Regular Portfolio Amount</div>
              <div class="detail-value">â‚¹ 52,14,041</div>
            </div>
            <div>
              <div class="detail-label">1+ PAR Accounts</div>
              <div class="detail-value">192</div>
            </div>
            <div>
              <div class="detail-label">1+ PAR Amount</div>
              <div class="detail-value">â‚¹ 60,64,414</div>
            </div>
            <div>
              <div class="detail-label">NPA Accounts</div>
              <div class="detail-value">170</div>
            </div>
            <div>
              <div class="detail-label">NPA Amount</div>
              <div class="detail-value">â‚¹ 56,18,272</div>
            </div>
            <div>
              <div class="detail-label">FTOD Accounts</div>
              <div class="detail-value">37</div>
            </div>
            <div>
              <div class="detail-label">FTOD Amount</div>
              <div class="detail-value">â‚¹ 63,140</div>
            </div>
            <div>
              <div class="detail-label">Audit Rating</div>
              <div class="detail-value">84%</div>
            </div>
          </div>
        </article>

        <!-- Audit rating leaders card -->
        <section class="card" id="auditLeaderCard">
          <div class="table-header" style="flex-direction:column;align-items:flex-start;gap:.35rem;">
            <h2 class="table-title">Audit Rating Table</h2>
            <p class="text-xs text-[var(--muted)] m-0">
              Designation wise performance covering disbursement accounts, NPA amount,
              and Regular Demand vs Collection %. Highest values are highlighted.
            </p>
          </div>
          <div class="table-scroller">
            <table class="table-grid leaders-grid" id="auditLeaderTable">
              <thead>
                <tr>
                  <th>Designation</th>
                  <th>Name</th>
                  <th>Highest DB Account</th>
                  <th>Highest NPA Amount</th>
                  <th>Regular Demand vs Collection %</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>FO</td>
                  <td>Demo Employee 1</td>
                  <td class="highlight-cell">383</td>
                  <td>â‚¹ 56,18,272</td>
                  <td>92%</td>
                </tr>
                <tr>
                  <td>BM</td>
                  <td>Demo Employee 2</td>
                  <td>250</td>
                  <td class="highlight-cell">â‚¹ 60,00,000</td>
                  <td class="highlight-cell">95%</td>
                </tr>
                <tr>
                  <td>AM</td>
                  <td>Demo Employee 3</td>
                  <td>210</td>
                  <td>â‚¹ 45,00,000</td>
                  <td>88%</td>
                </tr>
              </tbody>
            </table>
          </div>
        </section>
      </section>

      <!-- Raw rows table (static demo) -->
      <section class="card table-box" id="tableBox">
        <div class="table-header">
          <h2 class="table-title">Raw Sheet â€” database (Supabase UI demo)</h2>
          <div class="flex items-center gap-2 ml-auto">
            <input id="search" type="text" placeholder="Search rowsâ€¦" class="text-sm px-2 py-1 border rounded-md" />
            <span id="rowsCount" class="text-xs text-[var(--muted)]">2 rows</span>
            <button id="btn-fs" class="px-2 py-1 rounded border text-sm" title="Enter fullscreen">â›¶</button>
          </div>
        </div>
        <div class="table-scroller">
          <table class="table-grid" id="rowsTable">
            <thead>
              <tr>
                <th>Sl.no</th>
                <th>Employee ID</th>
                <th>Year</th>
                <th>Month</th>
                <th>Name</th>
                <th>Designation</th>
                <th>Level</th>
                <th>State</th>
                <th>Region</th>
                <th>District</th>
                <th>Branch Name</th>
                <th>Branch Code</th>
                <th>Disbursement Accounts</th>
                <th>Disbursement Amount</th>
                <th>Active Accounts</th>
                <th>Total Portfolio Amount</th>
                <th>Regular Portfolio Accounts</th>
                <th>Regular Portfolio Amount</th>
                <th>1+ PAR Accounts</th>
                <th>1+ PAR Amount</th>
                <th>NPA Accounts</th>
                <th>NPA Amount</th>
                <th>FTOD Accounts</th>
                <th>FTOD Amount</th>
                <th>Audit Rating</th>
                <th>Birthdate</th>
                <th>Wedding Anniversary</th>
                <th>Work Anniversary</th>
              </tr>
            </thead>
            <tbody>
              <tr class="my-row">
                <td>384</td>
                <td>NL10001</td>
                <td>2025</td>
                <td>October</td>
                <td>SHRIKANT TIPPANNA PURAVANTI</td>
                <td>FO</td>
                <td></td>
                <td>KARNATAKA</td>
                <td>DHARWAD</td>
                <td>GADAG</td>
                <td>GADAG</td>
                <td>5802</td>
                <td>383</td>
                <td>15201</td>
                <td>418</td>
                <td>11278455</td>
                <td>226</td>
                <td>5214041</td>
                <td>192</td>
                <td>6064414</td>
                <td>170</td>
                <td>5618272</td>
                <td>37</td>
                <td>63140</td>
                <td>84%</td>
                <td>1994-08-11</td>
                <td></td>
                <td>2023-12-01</td>
              </tr>
              <tr>
                <td>385</td>
                <td>NL10008</td>
                <td>2025</td>
                <td>October</td>
                <td>WACHHA SUSHEEL</td>
                <td>FO</td>
                <td></td>
                <td>KARNATAKA</td>
                <td>KALABURAGI</td>
                <td>BIDAR</td>
                <td>HUMNABAD</td>
                <td>5835</td>
                <td>221</td>
                <td>202756</td>
                <td>405</td>
                <td>10785053</td>
                <td>158</td>
                <td>4562870</td>
                <td>247</td>
                <td>6222183</td>
                <td>207</td>
                <td>5561996</td>
                <td>36</td>
                <td>106738</td>
                <td>80%</td>
                <td>1998-01-22</td>
                <td>2023-09-03</td>
                <td>2023-12-01</td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>
    </main>
  </div>

  <footer style="text-align:center;color:var(--muted);font-size:.85rem;padding:1rem 0;">
    Â© <span id="year"></span> NavaChetana Livelihoods
  </footer>

  <!-- Minimal UI-only script -->
  <script>
    // Dynamic year
    document.getElementById('year').textContent = new Date().getFullYear();

    // Simple demo actions
    document.getElementById('btn-refresh').addEventListener('click', () => {
      alert('UI demo only â€” no live refresh implemented.');
    });

    document.getElementById('btn-download').addEventListener('click', () => {
      alert('UI demo only â€” CSV download will be wired when backend is connected.');
    });

    const tableBox = document.getElementById('tableBox');
    const btnFS = document.getElementById('btn-fs');

    btnFS.addEventListener('click', async () => {
      try {
        if (document.fullscreenElement === tableBox) {
          await document.exitFullscreen();
        } else if (!document.fullscreenElement) {
          await tableBox.requestFullscreen();
        } else {
          await document.exitFullscreen();
          await tableBox.requestFullscreen();
        }
      } catch (err) {
        console.warn('Fullscreen not available', err);
      }
    });

    document.addEventListener('fullscreenchange', () => {
      const active = document.fullscreenElement === tableBox;
      btnFS.textContent = active ? 'ðŸ——' : 'â›¶';
      btnFS.title = active ? 'Exit fullscreen' : 'Enter fullscreen';
    });
  </script>
</body>
</html>
