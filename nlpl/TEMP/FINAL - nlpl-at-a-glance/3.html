<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Audit Table — Compact + Details</title>

  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    * { box-sizing: border-box; }
    body {
      background:#f9fafb;
      color:#1f2937;
      font-family:"Inter",system-ui,Segoe UI,Roboto,Arial,sans-serif;
      padding:1.5rem;
    }
    .card{
      background:#ffffff;
      border:1px solid #e5e7eb;
      border-radius:12px;
      padding:1rem;
      box-shadow:0 12px 24px rgba(31,41,55,.04);
      max-width:100%;
      margin:auto;
    }
    .table-scroller{
      overflow:auto;
    }
    table{
      width:100%;
      border-collapse:collapse;
      font-size:13px;
    }
    th, td{
      border:1px solid #e5e7eb;
      padding:.45rem .55rem;
      text-align:left;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }
    thead{
      background:#f9fafb;
      font-weight:600;
    }
    tbody tr:nth-child(4n+1),
    tbody tr:nth-child(4n+2){
      background:#ffffff;
    }
    tbody tr:nth-child(4n+3),
    tbody tr:nth-child(4n+4){
      background:#fefefe;
    }
    .badge-pill{
      display:inline-flex;
      align-items:center;
      padding:0.15rem 0.55rem;
      border-radius:999px;
      font-size:0.72rem;
      background:#eff6ff;
      color:#1d4ed8;
      font-weight:500;
    }
    .btn-ghost{
      font-size:0.75rem;
      padding:0.2rem 0.6rem;
      border-radius:999px;
      border:1px solid #e5e7eb;
      background:#ffffff;
      cursor:pointer;
    }
    .btn-ghost:hover{
      background:#f3f4f6;
    }
    .detail-row td{
      background:#f9fafb;
    }
    .detail-grid{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(180px,1fr));
      gap:0.75rem 1rem;
      font-size:0.78rem;
      margin-bottom:0.75rem;
    }
    .detail-item-label{
      font-size:0.7rem;
      text-transform:uppercase;
      letter-spacing:.04em;
      color:#6b7280;
      margin-bottom:0.1rem;
    }
    .detail-item-value{
      font-weight:600;
    }

    /* Notes / message box */
    .to.database-box{
      margin-top:0.5rem;
      border-top:1px dashed #e5e7eb;
      padding-top:0.75rem;
      padding-bottom:0.25rem;
      display:flex;
      flex-direction:column;
      gap:0.45rem;
    }
    .to.database-label{
      font-size:0.7rem;
      text-transform:uppercase;
      letter-spacing:.06em;
      color:#6b7280;
    }
    .to.database-textarea{
      width:100%;
      min-height:70px;
      max-height:150px;
      resize:vertical;
      padding:0.55rem 0.7rem;
      font-size:0.78rem;
      border-radius:0.75rem;
      border:1px solid #e5e7eb;
      outline:none;
      background:#f9fafb;
    }
    .to.database-textarea:focus{
      border-color:#93c5fd;
      box-shadow:0 0 0 1px #bfdbfe;
      background:#ffffff;
    }

    /* Short animated Send button */
    .send-btn {
      padding: 0.3rem 0.9rem;
      font-size: 0.76rem;
      background: #2563eb;
      color: white;
      border: none;
      border-radius: 999px;
      cursor: pointer;
      transition: background 0.25s ease, opacity 0.2s ease, transform 0.1s ease;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }
    .send-btn:hover:not(:disabled){
      background:#1d4ed8;
      transform: translateY(-0.5px);
    }
    .send-btn:disabled {
      opacity: 0.65;
      cursor: not-allowed;
      transform:none;
    }
    .spinner {
      width: 14px;
      height: 14px;
      border: 2.5px solid white;
      border-top: 2.5px solid transparent;
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
    }
    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    .hidden{
      display:none;
    }
  </style>
</head>

<body>
  <section class="card">
    <div class="mb-3 flex items-center justify-between gap-2">
      <div>
        <h2 class="text-lg font-bold">Audit Rating — Employee Metrics</h2>
        <p class="text-xs text-gray-500 mt-1">
          Compact view shows key metrics. Click "View details" to see only the additional disbursement, portfolio split, PAR and FTOD account info.
        </p>
      </div>
      <span class="badge-pill">UI Demo — Extra Fields Only</span>
    </div>

    <div class="table-scroller">
      <table>
        <thead>
          <tr>
            <th>Sl No</th>
            <th>Name</th>
            <th>Employee ID</th>
            <th>Designation</th>
            <th>Level</th>
            <th>Disb A/c</th>
            <th>Active A/c</th>
            <th>Total Portfolio</th>
            <th>NPA Amount</th>
            <th>FTOD Amount</th>
            <th>Action</th>
          </tr>
        </thead>

        <tbody>
          <!-- ========== ROW 1 ========== -->
          <tr class="data-row" data-row="1">
            <td>384</td>
            <td>Demo Employee 1</td>
            <td>NL10001</td>
            <td>FO</td>
            <td>L1</td>
            <td>383</td>
            <td>418</td>
            <td>₹ 1,12,78,455</td>
            <td>₹ 56,18,272</td>
            <td>₹ 63,140</td>
            <td>
              <button class="btn-ghost" data-toggle="1">View details</button>
            </td>
          </tr>

          <tr class="detail-row hidden" data-detail-for="1">
            <td colspan="11">
              <div class="detail-grid">
                <div>
                  <div class="detail-item-label">Disbursement Amount</div>
                  <div class="detail-item-value">₹ 15,201</div>
                </div>

                <div>
                  <div class="detail-item-label">Regular Portfolio Accounts</div>
                  <div class="detail-item-value">226</div>
                </div>
                <div>
                  <div class="detail-item-label">Regular Portfolio Amount</div>
                  <div class="detail-item-value">₹ 52,14,041</div>
                </div>

                <div>
                  <div class="detail-item-label">1+ PAR Accounts</div>
                  <div class="detail-item-value">192</div>
                </div>
                <div>
                  <div class="detail-item-label">1+ PAR Amount</div>
                  <div class="detail-item-value">₹ 60,64,414</div>
                </div>

                <div>
                  <div class="detail-item-label">NPA Accounts</div>
                  <div class="detail-item-value">170</div>
                </div>

                <div>
                  <div class="detail-item-label">FTOD Accounts</div>
                  <div class="detail-item-value">37</div>
                </div>
              </div>

              <!-- message / Notes section -->
              <div class="to database-box">
                <div class="to database-label">Send message / audit notes for Demo Employee 1</div>
                <textarea
                  class="to database-textarea"
                  placeholder="Write a short message for this employee's audit rating..."
                ></textarea>
                <button class="send-btn" type="button">
                  Send
                </button>
              </div>
            </td>
          </tr>

          <!-- ========== ROW 2 ========== -->
          <tr class="data-row" data-row="2">
            <td>385</td>
            <td>Demo Employee 2</td>
            <td>NL10008</td>
            <td>FO</td>
            <td>L1</td>
            <td>221</td>
            <td>405</td>
            <td>₹ 1,07,85,053</td>
            <td>₹ 55,61,996</td>
            <td>₹ 1,06,738</td>
            <td>
              <button class="btn-ghost" data-toggle="2">View details</button>
            </td>
          </tr>

          <tr class="detail-row hidden" data-detail-for="2">
            <td colspan="11">
              <div class="detail-grid">
                <div>
                  <div class="detail-item-label">Disbursement Amount</div>
                  <div class="detail-item-value">₹ 2,02,756</div>
                </div>

                <div>
                  <div class="detail-item-label">Regular Portfolio Accounts</div>
                  <div class="detail-item-value">158</div>
                </div>
                <div>
                  <div class="detail-item-label">Regular Portfolio Amount</div>
                  <div class="detail-item-value">₹ 45,62,870</div>
                </div>

                <div>
                  <div class="detail-item-label">1+ PAR Accounts</div>
                  <div class="detail-item-value">247</div>
                </div>
                <div>
                  <div class="detail-item-label">1+ PAR Amount</div>
                  <div class="detail-item-value">₹ 62,22,183</div>
                </div>

                <div>
                  <div class="detail-item-label">NPA Accounts</div>
                  <div class="detail-item-value">207</div>
                </div>

                <div>
                  <div class="detail-item-label">FTOD Accounts</div>
                  <div class="detail-item-value">36</div>
                </div>
              </div>

              <!-- message / Notes section -->
              <div class="to database-box">
                <div class="to database-label">Send message / audit notes for Demo Employee 2</div>
                <textarea
                  class="to.database-textarea to database-textarea"
                  placeholder="Write a short message for this employee's audit rating..."
                ></textarea>
                <button class="send-btn" type="button">
                  Send
                </button>
              </div>
            </td>
          </tr>

        </tbody>
      </table>
    </div>
  </section>

  <script>
    // Toggle detail rows
    document.querySelectorAll('[data-toggle]').forEach(btn => {
      btn.addEventListener('click', () => {
        const id = btn.getAttribute('data-toggle');
        const detailRow = document.querySelector(`.detail-row[data-detail-for="${id}"]`);
        const isHidden = detailRow.classList.contains('hidden');

        // If you want only one open at a time, uncomment below:
        // document.querySelectorAll('.detail-row').forEach(r => r.classList.add('hidden'));
        // document.querySelectorAll('[data-toggle]').forEach(b => b.textContent = 'View details');

        if (isHidden) {
          detailRow.classList.remove('hidden');
          btn.textContent = 'Hide details';
        } else {
          detailRow.classList.add('hidden');
          btn.textContent = 'View details';
        }
      });
    });

    // "Send" buttons – keep Send -> Loading -> Sent animation
    document.querySelectorAll('.to.database-box .send-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        const textarea = btn.closest('.to.database-box').querySelector('.to.database-textarea');
        const text = textarea.value.trim();
        if (!text) {
          alert('Please write a message before sending.');
          return;
        }

        // Disable button and show sending state
        btn.disabled = true;
        btn.innerHTML = `<span class="spinner"></span> Sending...`;

        // After 2 seconds → show Sent
        setTimeout(() => {
          btn.innerHTML = '✔ Sent';
          btn.style.background = '#16a34a'; // green
        }, 2000);
      });
    });
  </script>
</body>
</html>
