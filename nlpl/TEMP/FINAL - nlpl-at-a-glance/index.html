<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>NavaChetana — Combined View</title>

  <style>
    * { box-sizing: border-box; }

    body {
      margin: 0;
      padding: 2rem 1rem;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #f3f4f6;
      display: flex;
      justify-content: center;     /* center horizontally */
      align-items: flex-start;
    }

    .page-wrap {
      width: 100%;
      max-width: 1200px;           /* center column */
      display: flex;
      flex-direction: column;
      gap: 2rem;
    }

    .section-block {
      background: transparent;
    }

    /* ===== 1) SCOPE BAR ===== */

    .scope-shell {
      max-width: 100%;
      background: #fbfdff;
      border-radius: 999px;
      border: 1px solid #e5e7eb;
      padding: 0.65rem 1.25rem;
      display: flex;
      align-items: center;
      box-shadow:
        0 18px 30px rgba(15, 23, 42, 0.08),
        0 1px 2px rgba(15, 23, 42, 0.06);
    }

    .scope-left {
      display: flex;
      gap: 0.75rem;
      align-items: center;
    }

    .scope-pill {
      position: relative;
      padding: 0.45rem 1.4rem;
      border-radius: 999px;
      border: 1px solid #e5e7eb;
      background: #ffffff;
      color: #111827;
      font-size: 0.95rem;
      font-weight: 600;
      cursor: pointer;
      transition:
        background 0.2s ease,
        color 0.2s ease,
        box-shadow 0.2s ease,
        transform 0.15s ease,
        border-color 0.2s ease;
    }

    .scope-pill:hover {
      transform: translateY(-1px);
      box-shadow: 0 8px 14px rgba(15, 23, 42, 0.10);
    }

    .scope-pill.is-active {
      background: radial-gradient(circle at 30% 0, #66c3ff 0, #1d7fe9 45%, #1664c7 100%);
      color: #ffffff;
      border-color: #1d7fe9;
      box-shadow:
        0 10px 18px rgba(37, 99, 235, 0.35),
        0 0 0 1px rgba(191, 219, 254, 0.8);
    }

    .scope-right {
      margin-left: auto;
      font-size: 0.95rem;
      font-weight: 500;
      color: #6b7280;
      padding-left: 1rem;
      white-space: nowrap;
    }

    @media (max-width: 640px) {
      .scope-shell {
        border-radius: 16px;
        flex-direction: column;
        align-items: flex-start;
        gap: 0.5rem;
      }
      .scope-right {
        margin-left: 0;
        padding-left: 0;
      }
    }

    /* ===== 2) KPI STRIP (flip cards) ===== */

    :root{
      --ink:#1f2937;
      --muted:#6b7280;
      --border:#e5e7eb;
      --bg:#ffffff;
      --card-bg:#ffffff;
    }

    .kpi-page{
      background:var(--bg);
      color:var(--ink);
      font-family:"Inter",system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
      width:100%;
    }

    .kpi-page-shell{
      width:100%;
    }

    .kpi-grid{
      display:grid;
      grid-template-columns:repeat(3,1fr);
      gap:1rem;
    }

    .kpi-card{
      background:var(--card-bg);
      border:1px solid var(--border);
      border-radius:24px;
      padding:2.5rem 2.75rem;
      text-align:left;
      box-shadow:0 10px 25px rgba(15,23,42,0.08);
      transition: box-shadow 0.3s ease, transform 0.3s ease;
      position:relative;
      overflow:hidden;
      perspective:1000px;
    }

    .kpi-card:hover{
      transform: translateY(-4px) scale(1.03);
      box-shadow:0 18px 40px rgba(15,23,42,0.14);
    }

    .kpi-label{
      font-weight:600;
      color:var(--muted);
      font-size:0.9rem;
      letter-spacing:0.08em;
      text-transform:uppercase;
      margin-bottom:1.5rem;
    }

    .kpi-value{
      font-size:2rem;
      font-weight:800;
      color:var(--ink);
      position:relative;
      display:inline-flex;
      align-items:center;
      height:2.4rem;
      transform-style:preserve-3d;
    }

    .kpi-value span{
      position:absolute;
      left:0;
      right:0;
      top:0;
      bottom:0;
      display:flex;
      align-items:center;
      backface-visibility:hidden;
      transform-origin:center;
      transition:transform 0.5s ease;
    }

    .kpi-value .value-short{
      transform:rotateX(0deg);
    }

    .kpi-value .value-long{
      transform:rotateX(180deg);
    }

    .kpi-card:hover .kpi-value .value-short{
      transform:rotateX(-180deg);
    }

    .kpi-card:hover .kpi-value .value-long{
      transform:rotateX(0deg);
    }

    .span-all{
      grid-column:1 / -1;
      text-align:center;
      padding-block:2rem;
    }

    .badge-pill{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      min-width:60px;
      height:60px;
      border-radius:999px;
      font-weight:700;
      font-size:1.25rem;
      border:1px solid var(--border);
      background:#f3f4f6;
      color:#111827;
      padding:0 1.25rem;
    }

    @media(max-width:1100px){
      .kpi-grid{ grid-template-columns:repeat(2,1fr); }
    }
    @media(max-width:640px){
      .kpi-grid{ grid-template-columns:1fr; }
      .kpi-card{
        padding:1.75rem 1.9rem;
        border-radius:18px;
      }
      .kpi-value{ font-size:1.6rem; height:2.1rem; }
    }

    /* ===== 3) AUDIT TABLE ===== */

    .card{
      background:#ffffff;
      border:1px solid #e5e7eb;
      border-radius:12px;
      padding:1rem;
      box-shadow:0 12px 24px rgba(31,41,55,.04);
      max-width:100%;
      margin:auto;
    }

    .audit-header{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:0.75rem;
      margin-bottom:0.75rem;
    }

    .audit-title{
      font-size:1.1rem;
      font-weight:700;
      margin:0;
    }

    .audit-subtitle{
      font-size:0.75rem;
      color:#6b7280;
      margin:0.25rem 0 0;
    }

    .audit-badge{
      display:inline-flex;
      align-items:center;
      padding:0.25rem 0.7rem;
      border-radius:999px;
      font-size:0.72rem;
      background:#eff6ff;
      color:#1d4ed8;
      font-weight:500;
      white-space:nowrap;
      border:1px solid #bfdbfe;
    }

    .table-scroller{
      overflow:auto;
    }
    table{
      width:100%;
      border-collapse:collapse;
      font-size:13px;
    }
    th, td{
      border:1px solid #e5e7eb;
      padding:.45rem .55rem;
      text-align:left;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }
    thead{
      background:#f9fafb;
      font-weight:600;
    }
    tbody tr:nth-child(4n+1),
    tbody tr:nth-child(4n+2){
      background:#ffffff;
    }
    tbody tr:nth-child(4n+3),
    tbody tr:nth-child(4n+4){
      background:#fefefe;
    }

    .btn-ghost{
      font-size:0.75rem;
      padding:0.2rem 0.6rem;
      border-radius:999px;
      border:1px solid #e5e7eb;
      background:#ffffff;
      cursor:pointer;
    }
    .btn-ghost:hover{
      background:#f3f4f6;
    }

    .detail-row td{
      background:#f9fafb;
    }
    .detail-grid{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(180px,1fr));
      gap:0.75rem 1rem;
      font-size:0.78rem;
      margin-bottom:0.75rem;
    }
    .detail-item-label{
      font-size:0.7rem;
      text-transform:uppercase;
      letter-spacing:.04em;
      color:#6b7280;
      margin-bottom:0.1rem;
    }
    .detail-item-value{
      font-weight:600;
    }

    .to.database-box{
      margin-top:0.5rem;
      border-top:1px dashed #e5e7eb;
      padding-top:0.75rem;
      padding-bottom:0.25rem;
      display:flex;
      flex-direction:column;
      gap:0.45rem;
    }
    .to.database-label{
      font-size:0.7rem;
      text-transform:uppercase;
      letter-spacing:.06em;
      color:#6b7280;
    }
    .to.database-textarea{
      width:100%;
      min-height:70px;
      max-height:150px;
      resize:vertical;
      padding:0.55rem 0.7rem;
      font-size:0.78rem;
      border-radius:0.75rem;
      border:1px solid #e5e7eb;
      outline:none;
      background:#f9fafb;
    }
    .to.database-textarea:focus{
      border-color:#93c5fd;
      box-shadow:0 0 0 1px #bfdbfe;
      background:#ffffff;
    }

    .send-btn {
      padding: 0.3rem 0.9rem;
      font-size: 0.76rem;
      background: #2563eb;
      color: white;
      border: none;
      border-radius: 999px;
      cursor: pointer;
      transition: background 0.25s ease, opacity 0.2s ease, transform 0.1s ease;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }
    .send-btn:hover:not(:disabled){
      background:#1d4ed8;
      transform: translateY(-0.5px);
    }
    .send-btn:disabled {
      opacity: 0.65;
      cursor: not-allowed;
      transform:none;
    }
    .spinner {
      width: 14px;
      height: 14px;
      border: 2.5px solid white;
      border-top: 2.5px solid transparent;
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
    }
    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    .hidden{
      display:none;
    }
  </style>
</head>
<body>
  <div class="page-wrap">

    <!-- ===== SCOPE BAR SECTION ===== -->
    <section class="section-block">
      <div class="scope-shell" role="toolbar" aria-label="Scope selection">
        <div class="scope-left">
          <button class="scope-pill" data-scope="Company">Company</button>
          <button class="scope-pill" data-scope="Region">Region</button>
          <button class="scope-pill" data-scope="District">District</button>
          <button class="scope-pill is-active" data-scope="Branch">Branch</button>
        </div>
        <div class="scope-right" id="scope-current">Current: Branch</div>
      </div>
    </section>

    <!-- ===== KPI STRIP SECTION ===== -->
    <section class="section-block">
      <div class="kpi-page">
        <div class="kpi-page-shell">
          <section class="kpi-grid" aria-live="polite">
            <!-- Active Accounts -->
            <div class="kpi-card">
              <div class="kpi-label">Active Accounts</div>
              <div id="k_active" class="kpi-value">
                <span class="value-short">838.38 Cr</span>
                <span class="value-long">8,38,37,92,514</span>
              </div>
            </div>

            <!-- Total Portfolio -->
            <div class="kpi-card">
              <div class="kpi-label">Total Portfolio</div>
              <div id="k_total" class="kpi-value">
                <span class="value-short">838.38 Cr</span>
                <span class="value-long">9,12,45,67,321</span>
              </div>
            </div>

            <!-- Regular Portfolio -->
            <div class="kpi-card">
              <div class="kpi-label">Regular Portfolio</div>
              <div id="k_regular" class="kpi-value">
                <span class="value-short">838.38 Cr</span>
                <span class="value-long">7,85,23,11,908</span>
              </div>
            </div>

            <!-- 1+ PAR -->
            <div class="kpi-card">
              <div class="kpi-label">1+ PAR</div>
              <div id="k_par" class="kpi-value">
                <span class="value-short">838.38 Cr</span>
                <span class="value-long">52,14,78,904</span>
              </div>
            </div>

            <!-- NPA -->
            <div class="kpi-card">
              <div class="kpi-label">NPA</div>
              <div id="k_npa" class="kpi-value">
                <span class="value-short">838.38 Cr</span>
                <span class="value-long">18,73,45,612</span>
              </div>
            </div>

            <!-- Man Power -->
            <div class="kpi-card">
              <div class="kpi-label">Man Power (Unique Employees)</div>
              <div id="k_manpower" class="kpi-value">
                <span class="value-short">838.38 Cr</span>
                <span class="value-long">1,234</span>
              </div>
            </div>

            <!-- Audit Rating -->
            <div class="kpi-card span-all">
              <div class="kpi-label">Audit Rating</div>
              <div id="k_audit" class="kpi-value">
                <div class="badge-pill">90%</div>
              </div>
            </div>
          </section>
        </div>
      </div>
    </section>

    <!-- ===== AUDIT TABLE SECTION ===== -->
    <section class="section-block">
      <section class="card">
        <div class="audit-header">
          <div class="audit-header-text">
            <h2 class="audit-title">Audit Rating — Employee Metrics</h2>
            <p class="audit-subtitle">
              Compact view shows key metrics. Click "View details" to see only the additional disbursement, portfolio split, PAR and FTOD account info.
            </p>
          </div>
          <span class="audit-badge">UI Demo — Extra Fields Only</span>
        </div>

        <div class="table-scroller">
          <table>
            <thead>
              <tr>
                <th>Sl No</th>
                <th>Name</th>
                <th>Employee ID</th>
                <th>Designation</th>
                <th>Level</th>
                <th>Disb A/c</th>
                <th>Active A/c</th>
                <th>Total Portfolio</th>
                <th>NPA Amount</th>
                <th>FTOD Amount</th>
                <th>Action</th>
              </tr>
            </thead>

            <tbody>
              <!-- ========== ROW 1 ========== -->
              <tr class="data-row" data-row="1">
                <td>384</td>
                <td>Demo Employee 1</td>
                <td>NL10001</td>
                <td>FO</td>
                <td>L1</td>
                <td>383</td>
                <td>418</td>
                <td>₹ 1,12,78,455</td>
                <td>₹ 56,18,272</td>
                <td>₹ 63,140</td>
                <td>
                  <button class="btn-ghost" data-toggle="1">View details</button>
                </td>
              </tr>

              <tr class="detail-row hidden" data-detail-for="1">
                <td colspan="11">
                  <div class="detail-grid">
                    <div>
                      <div class="detail-item-label">Disbursement Amount</div>
                      <div class="detail-item-value">₹ 15,201</div>
                    </div>

                    <div>
                      <div class="detail-item-label">Regular Portfolio Accounts</div>
                      <div class="detail-item-value">226</div>
                    </div>
                    <div>
                      <div class="detail-item-label">Regular Portfolio Amount</div>
                      <div class="detail-item-value">₹ 52,14,041</div>
                    </div>

                    <div>
                      <div class="detail-item-label">1+ PAR Accounts</div>
                      <div class="detail-item-value">192</div>
                    </div>
                    <div>
                      <div class="detail-item-label">1+ PAR Amount</div>
                      <div class="detail-item-value">₹ 60,64,414</div>
                    </div>

                    <div>
                      <div class="detail-item-label">NPA Accounts</div>
                      <div class="detail-item-value">170</div>
                    </div>

                    <div>
                      <div class="detail-item-label">FTOD Accounts</div>
                      <div class="detail-item-value">37</div>
                    </div>
                  </div>

                  <div class="to database-box">
                    <div class="to database-label">Send message / audit notes for Demo Employee 1</div>
                    <textarea
                      class="to database-textarea"
                      placeholder="Write a short message for this employee's audit rating..."
                    ></textarea>
                    <button class="send-btn" type="button">
                      Send
                    </button>
                  </div>
                </td>
              </tr>

              <!-- ========== ROW 2 ========== -->
              <tr class="data-row" data-row="2">
                <td>385</td>
                <td>Demo Employee 2</td>
                <td>NL10008</td>
                <td>FO</td>
                <td>L1</td>
                <td>221</td>
                <td>405</td>
                <td>₹ 1,07,85,053</td>
                <td>₹ 55,61,996</td>
                <td>₹ 1,06,738</td>
                <td>
                  <button class="btn-ghost" data-toggle="2">View details</button>
                </td>
              </tr>

              <tr class="detail-row hidden" data-detail-for="2">
                <td colspan="11">
                  <div class="detail-grid">
                    <div>
                      <div class="detail-item-label">Disbursement Amount</div>
                      <div class="detail-item-value">₹ 2,02,756</div>
                    </div>

                    <div>
                      <div class="detail-item-label">Regular Portfolio Accounts</div>
                      <div class="detail-item-value">158</div>
                    </div>
                    <div>
                      <div class="detail-item-label">Regular Portfolio Amount</div>
                      <div class="detail-item-value">₹ 45,62,870</div>
                    </div>

                    <div>
                      <div class="detail-item-label">1+ PAR Accounts</div>
                      <div class="detail-item-value">247</div>
                    </div>
                    <div>
                      <div class="detail-item-label">1+ PAR Amount</div>
                      <div class="detail-item-value">₹ 62,22,183</div>
                    </div>

                    <div>
                      <div class="detail-item-label">NPA Accounts</div>
                      <div class="detail-item-value">207</div>
                    </div>

                    <div>
                      <div class="detail-item-label">FTOD Accounts</div>
                      <div class="detail-item-value">36</div>
                    </div>
                  </div>

                  <div class="to database-box">
                    <div class="to database-label">Send message / audit notes for Demo Employee 2</div>
                    <textarea
                      class="to.database-textarea to database-textarea"
                      placeholder="Write a short message for this employee's audit rating..."
                    ></textarea>
                    <button class="send-btn" type="button">
                      Send
                    </button>
                  </div>
                </td>
              </tr>

            </tbody>
          </table>
        </div>
      </section>
    </section>

  </div>

  <!-- Scope bar JS -->
  <script>
    const pills = document.querySelectorAll('.scope-pill');
    const currentLabel = document.getElementById('scope-current');

    pills.forEach(pill => {
      pill.addEventListener('click', () => {
        pills.forEach(p => p.classList.remove('is-active'));
        pill.classList.add('is-active');
        const scope = pill.getAttribute('data-scope') || pill.textContent.trim();
        currentLabel.textContent = 'Current: ' + scope;
      });
    });
  </script>

  <!-- Audit table JS -->
  <script>
    // Toggle detail rows
    document.querySelectorAll('[data-toggle]').forEach(btn => {
      btn.addEventListener('click', () => {
        const id = btn.getAttribute('data-toggle');
        const detailRow = document.querySelector(`.detail-row[data-detail-for="${id}"]`);
        const isHidden = detailRow.classList.contains('hidden');

        if (isHidden) {
          detailRow.classList.remove('hidden');
          btn.textContent = 'Hide details';
        } else {
          detailRow.classList.add('hidden');
          btn.textContent = 'View details';
        }
      });
    });

    // Send buttons
    document.querySelectorAll('.to.database-box .send-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        const textarea = btn.closest('.to.database-box').querySelector('.to.database-textarea');
        const text = textarea.value.trim();
        if (!text) {
          alert('Please write a message before sending.');
          return;
        }

        btn.disabled = true;
        btn.innerHTML = `<span class="spinner"></span> Sending...`;

        setTimeout(() => {
          btn.innerHTML = '✔ Sent';
          btn.style.background = '#16a34a';
        }, 2000);
      });
    });
  </script>
</body>
</html>
